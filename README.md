## Установка
### Винмание
Поддерживается передача данных только по протоколу HTTPS!
### Yii Framework (как компонент)
1. Склонируйте репозиторий или скачайте файл Telegram.php и распложите в папке с Вашими компонентами
2. Создайте нового бота через официальное приложение Telegram ([Telegram: Contact @botfather](https://telegram.me/botfather)) следующим образом: 
a) Добавьте бота;
b) Создайте бота командой «/newbot»;
c) BotFather вернет token, запомните его.
d) Так же можно настроить бота (аватарка и т.д.)
3. Проиницилизируйте компонент в конфигурационном файле:  
```
'components' => [
    'telegram' => [
        'class' => 'application.components.telegramNotifierBot.Telegram',
        'token' => ‘<API_TOKEN>’,
        'webhookUrl' => ‘<WEBHOOK_URL>’,
        'password' => ‘<PASSWORD>’
    ],
],
```
4. `<API_TOKEN>` - токен, полученный от BotFather (например 123456:bHjKJhKHkjyGvrg)
`<PASSWORD>` - Пароль, с помощью которого можно будет авторизоваться перед ботом
`<WEBHOOK_URL>` - Абсолютный путь на вашем сайте, с помощью которого Telegram будет оповещать о новых обращениях к боту (см. п.5). Например https://mysite.com/telegram/webhook/
5. Создайте новый action для обращений api telegram и пропишите обработчик.
```
public function actionWebhook()
{
    Yii::app()->telegram->webhookHandler();
}
```
6. Рекурсивно раздайте максимально возможные права на папку с данным компонентом (необходимо только для хранения идентификаторов чатов бота) и перейдите в браузере на ранее созданный action, для того, чтобы установить Webhook.
## Использование
Для использования бота необходимо добавить его в Telegram (ссылку на него тоже дает BotFather).
Затем написать ему пароль, который мы указывали ранее в конфигурации. Если все сделано правильно, бот ответит, что Вы будете получать уведомления с сайта example.com
По коду в нужных местах нужно расставить `Yii::app()->telegram->sendMessage('Вам занесли денег');`
## Команды бота
1. Для использования команд необходимо добавить в конфигурацию:
```
'botCommands' => [
    '/command1' => '/telegram/command?id=1',
    '/command2' => '/telegram/command?id=2',
]
```
2. Затем с помощью ([Telegram: Contact @botfather](https://telegram.me/botfather)) и команды `/setcommands` создать свои команды.
Например:
```
command1 - Описание команды
command2 - Описание второй команды
```
3. По ссылкам, которые мы указали в конфигурации, ожидается, что будет отдан ответ для бота в формате строки, после действий на сайте.
